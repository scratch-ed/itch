<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="color-scheme" content="dark light" />
    <title>Itch Environment</title>
  </head>
  <body>
    <!-- Scratch libraries -->
    <!-- Audio module -->
    <!-- Doesn't work :( -->
    <!--<script src="../node_modules/scratch-audio/dist.js"></script>-->
    <!-- Storage module -->
    <script src="../../../node_modules/scratch-storage/dist/web/scratch-storage.js"></script>
    <!-- Stage rendering -->
    <script src="../../../node_modules/scratch-render/dist/web/scratch-render.js"></script>
    <!-- SVG rendering -->
    <script src="../../../node_modules/scratch-svg-renderer/dist/web/scratch-svg-renderer.js"></script>
    <!-- VM -->
    <script src="../../../node_modules/scratch-vm/dist/web/scratch-vm.js"></script>

    <!-- Utils -->
    <script src="../../../node_modules/lodash/lodash.min.js"></script>
    <script src="../../../node_modules/itch-core/dist/js/judge.browser.js"></script>

    <!-- Scratch Judge -->
    <script src="./collector.js"></script>

    <h1>Itch Environment</h1>

    <div class="run-form">
      <input type="file" id="file" value="" />
      <input type="file" id="template" value="" />
    </div>

    <canvas id="scratch-stage"></canvas>

    <h2 id="out">Output</h2>
    <div id="output" style="margin-bottom: 500px"></div>

    <script>
      // Load the correct run script, depending on debug/puppeteer mode.
      const element = document.createElement('script');
      if (window.isPuppeteer) {
        element.setAttribute('src', './run-puppeteer.js');
      } else {
        element.setAttribute('src', './run-debug.js');
      }
      document.head.appendChild(element);
    </script>
  </body>
</html>
